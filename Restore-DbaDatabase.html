<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=2.0">
    <title>dbatools docs | Restore-DbaDatabase</title>
    <link rel="icon" href="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png" sizes="32x32">
    <link rel="icon" href="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png" sizes="192x192">
    <link rel="apple-touch-icon-precomposed" href="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png">
    <meta name="msapplication-TileImage" content="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png">

    <link title="Search" rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml">
    <meta name="keywords" content="dbatools, ">
    <meta name="subtitle" content="Docs for Restore-DbaDatabase">
    <meta property="og:type" content="article" />
    <meta property="og:title" content="dbatools docs:  Restore-DbaDatabase" />
    <meta property="og:url" content="https://docs.dbatools.io/Restore-DbaDatabase.html" />
    <meta property="og:description" content="dbatools docs for Restore-DbaDatabase" />
    <meta property="og:site_name" content="docs.dbatools.io" />
    <meta property="og:locale" content="en_US" />
    <meta name="twitter:text:title" content="dbatools docs:  Restore-DbaDatabase" />
    <meta name="twitter:image" content="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png" />
    <meta name="twitter:card" content="summary" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css"
        href="//cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

    <link rel="stylesheet" href="assets/css/layout.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80639740-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-80639740-2');
    </script>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/lodash@4.17.4/lodash.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.jsdelivr.net/jquery.scrollto/2.1.2/jquery.scrollTo.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/autolinker/1.7.1/Autolinker.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jqcloud2@2.0.3/dist/jqcloud.min.js"
        integrity="sha256-+krhsKJpvd3AZYVGHcwyCUGO01uNdGSTvqR7Apcy30E=" crossorigin="anonymous"></script>

    <script type="text/javascript" language="javascript">
        function register_dbatools_hljs(dbatoolscommands) {

            hljs.registerLanguage("powershell", function (e) {
                var t = {
                    b: "`[\\s\\S]",
                    r: 0
                },
                    o = {
                        cN: "variable",
                        v: [{
                            b: /\$[\w\d][\w\d_:]*/
                        }]
                    },
                    r = {
                        cN: "literal",
                        b: /\$(null|true|false)\b/
                    },
                    n = {
                        cN: "string",
                        v: [{
                            b: /"/,
                            e: /"/
                        }, {
                            b: /@"/,
                            e: /^"@/
                        }],
                        c: [t, o, {
                            cN: "variable",
                            b: /\$[A-z]/,
                            e: /[^A-z]/
                        }]
                    },
                    a = {
                        cN: "string",
                        v: [{
                            b: /'/,
                            e: /'/
                        }, {
                            b: /@'/,
                            e: /^'@/
                        }]
                    },
                    i = {
                        cN: "doctag",
                        v: [{
                            b: /\.(synopsis|description|example|inputs|outputs|notes|link|component|role|functionality)/
                        }, {
                            b: /\.(parameter|forwardhelptargetname|forwardhelpcategory|remotehelprunspace|externalhelp)\s+\S+/
                        }]
                    },
                    s = e.inherit(e.C(null, null), {
                        v: [{
                            b: /#/,
                            e: /$/
                        }, {
                            b: /<#/,
                            e: /#>/
                        }],
                        c: [i]
                    });
                return {
                    aliases: ["ps"],
                    l: /-?[A-z\.\-]+/,
                    cI: !0,
                    k: {
                        keyword: "if else foreach return function do while until elseif begin for trap data dynamicparam end break throw param continue finally in switch exit filter try process catch",
                        built_in: dbatoolscommands + " Add-Computer Add-Content Add-History Add-JobTrigger Add-Member Add-PSSnapin Add-Type Checkpoint-Computer Clear-Content Clear-EventLog Clear-History Clear-Host Clear-Item Clear-ItemProperty Clear-Variable Compare-Object Complete-Transaction Connect-PSSession Connect-WSMan Convert-Path ConvertFrom-Csv ConvertFrom-Json ConvertFrom-SecureString ConvertFrom-StringData ConvertTo-Csv ConvertTo-Html ConvertTo-Json ConvertTo-SecureString ConvertTo-Xml Copy-Item Copy-ItemProperty Debug-Process Disable-ComputerRestore Disable-JobTrigger Disable-PSBreakpoint Disable-PSRemoting Disable-PSSessionConfiguration Disable-WSManCredSSP Disconnect-PSSession Disconnect-WSMan Disable-ScheduledJob Enable-ComputerRestore Enable-JobTrigger Enable-PSBreakpoint Enable-PSRemoting Enable-PSSessionConfiguration Enable-ScheduledJob Enable-WSManCredSSP Enter-PSSession Exit-PSSession Export-Alias Export-Clixml Export-Console Export-Counter Export-Csv Export-FormatData Export-ModuleMember Export-PSSession ForEach-Object Format-Custom Format-List Format-Table Format-Wide Get-Acl Get-Alias Get-AuthenticodeSignature Get-ChildItem Get-Command Get-ComputerRestorePoint Get-Content Get-ControlPanelItem Get-Counter Get-Credential Get-Culture Get-Date Get-Event Get-EventLog Get-EventSubscriber Get-ExecutionPolicy Get-FormatData Get-Host Get-HotFix Get-Help Get-History Get-IseSnippet Get-Item Get-ItemProperty Get-Job Get-JobTrigger Get-Location Get-Member Get-Module Get-PfxCertificate Get-Process Get-PSBreakpoint Get-PSCallStack Get-PSDrive Get-PSProvider Get-PSSession Get-PSSessionConfiguration Get-PSSnapin Get-Random Get-ScheduledJob Get-ScheduledJobOption Get-Service Get-TraceSource Get-Transaction Get-TypeData Get-UICulture Get-Unique Get-Variable Get-Verb Get-WinEvent Get-WmiObject Get-WSManCredSSP Get-WSManInstance Group-Object Import-Alias Import-Clixml Import-Counter Import-Csv Import-IseSnippet Import-LocalizedData Import-PSSession Import-Module Invoke-AsWorkflow Invoke-Command Invoke-Expression Invoke-History Invoke-Item Invoke-RestMethod Invoke-WebRequest Invoke-WmiMethod Invoke-WSManAction Join-Path Limit-EventLog Measure-Command Measure-Object Move-Item Move-ItemProperty New-Alias New-Event New-EventLog New-IseSnippet New-Item New-ItemProperty New-JobTrigger New-Object New-Module New-ModuleManifest New-PSDrive New-PSSession New-PSSessionConfigurationFile New-PSSessionOption New-PSTransportOption New-PSWorkflowExecutionOption New-PSWorkflowSession New-ScheduledJobOption New-Service New-TimeSpan New-Variable New-WebServiceProxy New-WinEvent New-WSManInstance New-WSManSessionOption Out-Default Out-File Out-GridView Out-Host Out-Null Out-Printer Out-String Pop-Location Push-Location Read-Host Receive-Job Register-EngineEvent Register-ObjectEvent Register-PSSessionConfiguration Register-ScheduledJob Register-WmiEvent Remove-Computer Remove-Event Remove-EventLog Remove-Item Remove-ItemProperty Remove-Job Remove-JobTrigger Remove-Module Remove-PSBreakpoint Remove-PSDrive Remove-PSSession Remove-PSSnapin Remove-TypeData Remove-Variable Remove-WmiObject Remove-WSManInstance Rename-Computer Rename-Item Rename-ItemProperty Reset-ComputerMachinePassword Resolve-Path Restart-Computer Restart-Service Restore-Computer Resume-Job Resume-Service Save-Help Select-Object Select-String Select-Xml Send-MailMessage Set-Acl Set-Alias Set-AuthenticodeSignature Set-Content Set-Date Set-ExecutionPolicy Set-Item Set-ItemProperty Set-JobTrigger Set-Location Set-PSBreakpoint Set-PSDebug Set-PSSessionConfiguration Set-ScheduledJob Set-ScheduledJobOption Set-Service Set-StrictMode Set-TraceSource Set-Variable Set-WmiInstance Set-WSManInstance Set-WSManQuickConfig Show-Command Show-ControlPanelItem Show-EventLog Sort-Object Split-Path Start-Job Start-Process Start-Service Start-Sleep Start-Transaction Start-Transcript Stop-Computer Stop-Job Stop-Process Stop-Service Stop-Transcript Suspend-Job Suspend-Service Tee-Object Test-ComputerSecureChannel Test-Connection Test-ModuleManifest Test-Path Test-PSSessionConfigurationFile Trace-Command Unblock-File Undo-Transaction Unregister-Event Unregister-PSSessionConfiguration Unregister-ScheduledJob Update-FormatData Update-Help Update-List Update-TypeData Use-Transaction Wait-Event Wait-Job Wait-Process Where-Object Write-Debug Write-Error Write-EventLog Write-Host Write-Output Write-Progress Write-Verbose Write-Warning Add-MDTPersistentDrive Disable-MDTMonitorService Enable-MDTMonitorService Get-MDTDeploymentShareStatistics Get-MDTMonitorData Get-MDTOperatingSystemCatalog Get-MDTPersistentDrive Import-MDTApplication Import-MDTDriver Import-MDTOperatingSystem Import-MDTPackage Import-MDTTaskSequence New-MDTDatabase Remove-MDTMonitorData Remove-MDTPersistentDrive Restore-MDTPersistentDrive Set-MDTMonitorData Test-MDTDeploymentShare Test-MDTMonitorData Update-MDTDatabaseSchema Update-MDTDeploymentShare Update-MDTLinkedDS Update-MDTMedia Update-MDTMedia Add-VamtProductKey Export-VamtData Find-VamtManagedMachine Get-VamtConfirmationId Get-VamtProduct Get-VamtProductKey Import-VamtData Initialize-VamtData Install-VamtConfirmationId Install-VamtProductActivation Install-VamtProductKey Update-VamtProduct",
                        nomarkup: "-ne -eq -lt -gt -ge -le -not -like -notlike -match -notmatch -contains -notcontains -in -notin -replace"
                    },
                    c: [t, e.NM, n, a, r, o, s]
                }
            });

        }
        $(document).ready(function () {
            function render_doc(doc_to_render, examples_mode) {
                
                $("#rendered h5").each(function (i, el) {
                    if ($(el).text().startsWith('-')) {
                        $(el).addClass('param')
                    }
                })
                $('#rendered table').addClass('table table-sm table-hover')
                if (examples_mode == 'new') {
                    $('#rendered code').addClass('powershell')
                }
                $('#rendered code').each(function (i, block) {
                    hljs.highlightBlock(block);
                })
                var authorcontent = $("td:contains('Author')").next('td').addClass('dbatools_author').text()
                $("#rendered .dbatools_author").html(Autolinker.link(authorcontent, {
                    className: 'myLink',
                    mention: 'twitter'
                })
                )
                $("#rendered h2#syntax").next().find('code').addClass('wrapped')
                if (ClipboardJS.isSupported()) {
                    $("#rendered h5[id^='example-']").append('<div class="bd-clipboard"><button class="btn-clipboard" title="Copy to clipboard">Copy</button></div>')
                    new ClipboardJS('.btn-clipboard', {
                        text: function (trigger) {
                            var textlines = $(trigger).parent().parent().next('pre').find('code').text().split('\n')
                            var copied = []
                            _.forEach(textlines, function (row) {
                                copied.push(row.replace(/^PS C:\\> /, "").replace(/^>>/, ""))
                            })
                            return _.join(copied, '\n')
                        }
                    });
                }


                //not all code is a block 
                $("#rendered h3[id*='-parameters']").nextAll().find('code').addClass('hljs-inline')
                $('#rendered #description').nextUntil('#rendered #syntax').find('code').addClass('hljs-inline')
            }

            $('#loader').removeClass('invisible')
            var index_url = 'assets/dbatools-index.json'
            var external_url = 'assets/external.json'
            var values = [];
            var options = {
                valueNames: ['CommandName', 'Description', 'Alias', 'Examples', 'Params'],
                item: '<a class="list-group-item" href="#"><span class="CommandName"></span></a>'
            }
            cmdlist = new List('cmdlist', options, values);
            var indexhelp = ''
            var allcmds = $.getJSON(index_url, function (data) {
                indexhelp = data
                cmdlist.add(data)
                var dbacommands = []
                var cloudlist = {}
                _.forEach(data, function (el) {
                    dbacommands.push(el.CommandName)
                    if (_.isArray(el.Tags)) {
                        _.forEach(el.Tags, function (el) {
                            if (!_.has(cloudlist, el)) {
                                cloudlist[el] = 0
                            }
                            cloudlist[el] += 1
                        })
                    } else if (!_.isUndefined(el.Tags)){
                        if (!_.has(cloudlist, el.Tags)) {
                            cloudlist[el.Tags] = 0
                        }
                        cloudlist[el.Tags] += 1
                    }
                })
                var weightedVals = []
                _.forEach(cloudlist, function (value, key) {
                    weightedVals.push({
                        text: key,
                        weight: value,
                        handlers: {
                            click: function () { $('#search-ft').val('tag:' + key).trigger('keyup') }
                        }
                    })
                })
                var pixelHeight = window.innerHeight * 0.65;
                $('#canvas').css({ 'height': pixelHeight + 'px' });
                $('#canvas').jQCloud(weightedVals, {
                    autoResize: true
                });

                register_dbatools_hljs(dbacommands.join(' '))
                $(window).trigger('hashchange');
            })
            var options2 = {
                valueNames: ['extName', { name: 'extHref', attr: 'href' }],
                item: '<div><a class="list-group-item list-group-item-secondary extHref" href="#" _target="_blank"><span class="extName"></span></a></div>'
            }
            extlist = new List('extlist', options2, [])

            $.getJSON(external_url, function (data) {
                $('#dbatools_version').text('(v ' + data.version + ')')
                _.forEach(data.external_links, function (el) {
                    extlist.add({ 'extName': el.name, 'extHref': el.href })
                })
            })
            cmdlist.on('searchComplete', function (e) {
                if (cmdlist.matchingItems.length === 0) {
                    var searchString = $('#search-ft').val().trim();
                    if (searchString.length > 0 && !searchString.startsWith("ft:")) {
                        if (searchString != "f" && searchString != "ft" && searchString != "ft:") {
                            $('#search-ft').val("ft:" + searchString)
                        }
                    }
                }
            })
            $('#cmdlist').on('click', 'a', function (e) {
                e.preventDefault();
                window.location.href = $(this).find('span.CommandName').text()
                /*
                window.location.hash = '#' + $(this).find('span.CommandName').text();
                $('#cmdlist').find('a.active').removeClass('active')
                $(this).addClass('active')
                */
            })
            $('#search-ft').on('keyup', function () {
                var searchString = $(this).val();
                if (searchString.trim() == "ft:" || searchString.trim() == "tag:") {
                    extlist.search();
                }
                else if (searchString.startsWith("ft:")) {
                    searchString = searchString.substring(3).trim();
                    cmdlist.search(searchString, ['CommandName', 'Alias', 'Description', 'Examples', 'Params']);
                } else if (searchString.startsWith("tag:")) {
                    searchString = searchString.substring(4).trim();
                    cmdlist.filter(function (item) {
                        if (_.indexOf(item.values().Tags, searchString) !== -1) {
                            return true;
                        } else {
                            return false;
                        }
                    });
                } else {
                    cmdlist.search(searchString, ['CommandName', 'Alias']);
                }
                extlist.search('$$$')
                if (_.isEmpty(searchString)) {
                    extlist.search()
                    cmdlist.filter()
                }
            })
            $('#clear-search').on('click', function () {
                $('#search-ft').val('').trigger('keyup')
            })
            $(window).on('hashchange', function (e) {
                var hash = window.location.hash.substr(1);
                var pagename = window.location.pathname.split("/").filter(function (c) { return c.length; }).pop();
                if (_.isUndefined(pagename)) {
                    pagename = ''
                } else {
                    pagename = pagename.split('.')[0];
                }
                if (hash.length == 0) {
                    hash = pagename
                }
                if (hash.length > 0) {
                    //ends with /
                    if (_.endsWith(hash, '/')) {
                        window.location.hash = '#' + hash.slice(0, hash.length - 1)
                        $(window).trigger('hashchange');
                        return;
                    }
                    //exact match
                    var topublish = _.findIndex(indexhelp, { 'Name': hash })
                    if (topublish == -1) {
                        //lowercase match
                        var topublish = _.findIndex(indexhelp, function (el) { return _.toLower(el.Name) == _.toLower(hash) })
                        if (topublish == -1) {
                            //alias match
                            var topublish = _.findIndex(indexhelp, { 'Alias': hash })
                            if (topublish == -1) {
                                //lowercase alias match
                                var topublish = _.findIndex(indexhelp, function (el) { return _.toLower(el.Alias) == _.toLower(hash) })
                            }
                            if (topublish == -1) {
                                //multiple aliases, optionally lowercased
                                var topublish = _.findIndex(indexhelp, function (el) { return _.includes(_.toLower(el.Alias).split(','), _.toLower(hash)) })
                            }
                        }
                        if (topublish !== -1) {
                            //normalization of URI
                            window.location.hash = '#' + indexhelp[topublish].CommandName
                            $(window).trigger('hashchange')
                            return;
                        }
                    }
                    if (topublish == -1) {
                        $('#rendered').html(marked('### 404 Function not found \n (while searching for ' + hash + '). Please visit dbatools.io/commands for an updated index of current commands.'));
                    } else {
                        var doc_to_render = indexhelp[topublish]
                        render_doc(doc_to_render, 'new')
                        $("body").data("doc_to_render", indexhelp[topublish])
                        if ($("#headscroll").offset().top > 150) {
                            $(window).scrollTo('#headscroll')
                        } else {
                            $(window).scrollTo(0, 800)
                        }
                    }
                } else {
                    $('#loader').addClass('invisible')
                }
            })
            $(window).scroll(function () {
                if ($(this).scrollTop() > 50) {
                    $('#back-to-top').fadeIn();
                } else {
                    $('#back-to-top').fadeOut();
                }
            })
            $('#back-to-top').click(function () {
                $(window).scrollTo(0, 800)
                return false;
            })

        })
    </script>
</head>


<body>

    <nav class="navbar navbar-expand-md customnav">
        <a href="https://docs.dbatools.io/" class="navbar-brand" rel="home" itemprop="url">
            <img width="265" height="64" src="https://dbatools.io/wp-content/uploads/2018/09/dbatools-docs.png"
                class="custom-logo" alt="dbatools" itemprop="logo" scale="0">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
            aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="oi oi-menu"></span>
        </button>
        <div class="collapse navbar-collapse flex-grow-1 text-right" id="navbarCollapse">
            <ul class="navbar-nav ml-auto flex-nowrap">
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/download/">download</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/getting-started/">get started</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/functions/">commands</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#">docs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/team/">team</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/subscribe/">subscribe</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/slack">find us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/builds">build reference</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dbatools.io/boh">bill of health</a>
                </li>
            </ul>
            <div class="p-2 flex-shrink-0 bd-highlight invisible">cl said "add this much | |"</div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <hr />
            </div>
        </div>
        <div class="row">
            <div class="col-xl-3 col-lg-5 col-md-5 col-sm-12 bd-sidebar">
                <div id="relcommands" class="">
                    <h3>
                        commands
                        <small id="dbatools_version" class="text-muted"></small>
                    </h3>
                    <p></p>
                    <div class="form-group row">
                        <div class="col-lg-12">
                            <div class="input-group">

                                <input type="text" class="form-control" id="search-ft"
                                    placeholder="Search (&quot;ft: term&quot; enables fulltext)" autocomplete="off">
                                <div class="input-group-append">
                                    <div class="input-group-text" id="clear-search">Clear</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="extlist">
                        <div class="list list-group"></div>
                    </div>
                    <div id="cmdlist">
                        <div class="list list-group"></div>
                    </div>
                </div>
            </div>
            <div class="col-xl-9 col-lg-7 col-md-7 col-sm-12 bd-content">
                <div id="headscroll">
                    <a id="back-to-top" href="#" class="btn btn-primary btn-lg back-to-top" role="button"
                        title="Click to return on the top page">&#94;</a>
                </div>
                <div id="rendered">
                    <h1 id="restore-dbadatabase">Restore-DbaDatabase</h1>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Author</strong></td>
<td>Stuart Moore (@napalmgram), stuart-moore.com</td>
</tr>
<tr>
<td><strong>Availability</strong></td>
<td>Windows, Linux, macOS</td>
</tr>
</tbody>
</table>
<p> </p>
<h2 id="synopsis">Synopsis</h2>
<p>Restores a SQL Server Database from a set of backup files</p>
<h2 id="description">Description</h2>
<p>Upon being passed a list of potential backups files this command will scan the files, select those that contain SQL Server
backup sets. It will then filter those files down to a set that can perform the requested restore, checking that we have a
full restore chain to the point in time requested by the caller.</p>
<p>The function defaults to working on a remote instance. This means that all paths passed in must be relative to the remote instance.
XpDirTree will be used to perform the file scans</p>
<p>Various means can be used to pass in a list of files to be considered. The default is to non recursively scan the folder
passed in.</p>
<h2 id="syntax">Syntax</h2>
<pre><code>Restore-DbaDatabase -SqlInstance &lt;DbaInstanceParameter&gt;
    [-SqlCredential &lt;PSCredential&gt;] -Path &lt;Object[]&gt;
    [-DatabaseName &lt;Object[]&gt;]
    [-DestinationDataDirectory &lt;String&gt;]
    [-DestinationLogDirectory &lt;String&gt;]
    [-DestinationFileStreamDirectory &lt;String&gt;]
    [-RestoreTime &lt;DateTime&gt;]
    [-NoRecovery]
    [-WithReplace]
    [-KeepReplication]
    [-XpDirTree]
    [-OutputScriptOnly]
    [-VerifyOnly]
    [-MaintenanceSolutionBackup]
    [-FileMapping &lt;Hashtable&gt;]
    [-IgnoreLogBackup]
    [-IgnoreDiffBackup]
    [-UseDestinationDefaultDirectories]
    [-ReuseSourceFolderStructure]
    [-DestinationFilePrefix &lt;String&gt;]
    [-RestoredDatabaseNamePrefix &lt;String&gt;]
    [-TrustDbBackupHistory]
    [-MaxTransferSize &lt;Int32&gt;]
    [-BlockSize &lt;Int32&gt;]
    [-BufferCount &lt;Int32&gt;]
    [-DirectoryRecurse]
    [-EnableException]
    [-StandbyDirectory &lt;String&gt;]
    [-Continue]
    [-ExecuteAs &lt;String&gt;]
    [-AzureCredential &lt;String&gt;]
    [-ReplaceDbNameInFile]
    [-DestinationFileSuffix &lt;String&gt;]
    [-KeepCDC]
    [-GetBackupInformation &lt;String&gt;]
    [-StopAfterGetBackupInformation]
    [-SelectBackupInformation &lt;String&gt;]
    [-StopAfterSelectBackupInformation]
    [-FormatBackupInformation &lt;String&gt;]
    [-StopAfterFormatBackupInformation]
    [-TestBackupInformation &lt;String&gt;]
    [-StopAfterTestBackupInformation]
    [-StopBefore]
    [-StopMark &lt;String&gt;]
    [-StopAfterDate &lt;DateTime&gt;]
    [-StatementTimeout &lt;Int32&gt;]
    [-WhatIf]
    [-Confirm]
    [&lt;CommonParameters&gt;]

Restore-DbaDatabase -SqlInstance &lt;DbaInstanceParameter&gt;
    [-SqlCredential &lt;PSCredential&gt;] -Path &lt;Object[]&gt;
    [-DatabaseName &lt;Object[]&gt;]
    [-OutputScriptOnly]
    [-TrustDbBackupHistory]
    [-MaxTransferSize &lt;Int32&gt;]
    [-BlockSize &lt;Int32&gt;]
    [-BufferCount &lt;Int32&gt;]
    [-EnableException]
    [-AzureCredential &lt;String&gt;]
    [-GetBackupInformation &lt;String&gt;]
    [-StopAfterGetBackupInformation]
    [-SelectBackupInformation &lt;String&gt;]
    [-StopAfterSelectBackupInformation]
    [-FormatBackupInformation &lt;String&gt;]
    [-StopAfterFormatBackupInformation]
    [-TestBackupInformation &lt;String&gt;]
    [-StopAfterTestBackupInformation] -PageRestore &lt;Object&gt; -PageRestoreTailFolder &lt;String&gt;
    [-StopBefore]
    [-StopMark &lt;String&gt;]
    [-StopAfterDate &lt;DateTime&gt;]
    [-StatementTimeout &lt;Int32&gt;]
    [-WhatIf]
    [-Confirm]
    [&lt;CommonParameters&gt;]

Restore-DbaDatabase -SqlInstance &lt;DbaInstanceParameter&gt;
    [-SqlCredential &lt;PSCredential&gt;]
    [-DatabaseName &lt;Object[]&gt;]
    [-OutputScriptOnly]
    [-EnableException]
    [-AzureCredential &lt;String&gt;]
    [-Recover]
    [-GetBackupInformation &lt;String&gt;]
    [-StopAfterGetBackupInformation]
    [-SelectBackupInformation &lt;String&gt;]
    [-StopAfterSelectBackupInformation]
    [-FormatBackupInformation &lt;String&gt;]
    [-StopAfterFormatBackupInformation]
    [-TestBackupInformation &lt;String&gt;]
    [-StopAfterTestBackupInformation]
    [-StopBefore]
    [-StopMark &lt;String&gt;]
    [-StopAfterDate &lt;DateTime&gt;]
    [-StatementTimeout &lt;Int32&gt;]
    [-WhatIf]
    [-Confirm]
    [&lt;CommonParameters&gt;]

</code></pre>
<p> </p>
<h2 id="examples">Examples</h2>
<p> </p>
<h5 id="example-1">Example:  1</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path \\server2\backups
</code></pre>
<p>Scans all the backup files in \server2\backups, filters them and restores the database to server1\instance1<br></p>
<h5 id="example-2">Example:  2</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path \\server2\backups -MaintenanceSolutionBackup -DestinationDataDirectory c:\restores
</code></pre>
<p>Scans all the backup files in \server2\backups$ stored in an Ola Hallengren style folder structure,<br>
filters them and restores the database to the c:\restores folder on server1\instance1<br></p>
<h5 id="example-3">Example:  3</h5>
<pre><code>PS C:\&gt; Get-ChildItem c:\SQLbackups1\, \\server\sqlbackups2 | Restore-DbaDatabase -SqlInstance server1\instance1
</code></pre>
<p>Takes the provided files from multiple directories and restores them on  server1\instance1<br></p>
<h5 id="example-4">Example:  4</h5>
<pre><code>PS C:\&gt; $RestoreTime = Get-Date('11:19 23/12/2016')
PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path \\server2\backups -MaintenanceSolutionBackup -DestinationDataDirectory c:\restores -RestoreTime $RestoreTime
</code></pre>
<p>Scans all the backup files in \server2\backups stored in an Ola Hallengren style folder structure,<br>
filters them and restores the database to the c:\restores folder on server1\instance1 up to 11:19 23/12/2016<br></p>
<h5 id="example-5">Example:  5</h5>
<pre><code>PS C:\&gt; $result = Restore-DbaDatabase -SqlInstance server1\instance1 -Path \\server2\backups -DestinationDataDirectory c:\restores -OutputScriptOnly
PS C:\&gt; $result | Out-File -Filepath c:\scripts\restore.sql
</code></pre>
<p>Scans all the backup files in \server2\backups, filters them and generate the T-SQL Scripts to restore the database to the latest point in time, and then stores the output in a file for later <br>
retrieval<br></p>
<h5 id="example-6">Example:  6</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path c:\backups -DestinationDataDirectory c:\DataFiles -DestinationLogDirectory c:\LogFile
</code></pre>
<p>Scans all the files in c:\backups and then restores them onto the SQL Server Instance server1\instance1, placing data files<br>
c:\DataFiles and all the log files into c:\LogFiles<br></p>
<h5 id="example-7">Example:  7</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path http://demo.blob.core.windows.net/backups/dbbackup.bak -AzureCredential MyAzureCredential
</code></pre>
<p>Will restore the backup held at  <a href="http://demo.blob.core.windows.net/backups/dbbackup.bak">http://demo.blob.core.windows.net/backups/dbbackup.bak</a> to server1\instance1. The connection to Azure will be made using the<br>
credential MyAzureCredential held on instance Server1\instance1<br></p>
<h5 id="example-8">Example:  8</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path http://demo.blob.core.windows.net/backups/dbbackup.bak
</code></pre>
<p>Will attempt to restore the backups from <a href="http://demo.blob.core.windows.net/backups/dbbackup.bak">http://demo.blob.core.windows.net/backups/dbbackup.bak</a> if a SAS credential with the name <a href="http://demo.blob.core.windows.net/backups">http://demo.blob.core.windows.net/backups</a> exists on server1\instance1<br></p>
<h5 id="example-9">Example:  9</h5>
<pre><code>PS C:\&gt; $File = Get-ChildItem c:\backups, \\server1\backups -recurse
PS C:\&gt; $File | Restore-DbaDatabase -SqlInstance Server1\Instance -UseDestinationDefaultDirectories
</code></pre>
<p>This will take all of the files found under the folders c:\backups and \server1\backups, and pipeline them into<br>
Restore-DbaDatabase. Restore-DbaDatabase will then scan all of the files, and restore all of the databases included<br>
to the latest point in time covered by their backups. All data and log files will be moved to the default SQL Server<br>
folder for those file types as defined on the target instance.<br></p>
<h5 id="example-10">Example:  10</h5>
<pre><code>PS C:\&gt; $files = Get-ChildItem C:\dbatools\db1
PS C:\&gt; $params = @{
&gt;&gt; SqlInstance = 'server\instance1'
&gt;&gt; DestinationFilePrefix = 'prefix'
&gt;&gt; DatabaseName ='Restored'
&gt;&gt; RestoreTime = (get-date &quot;14:58:30 22/05/2017&quot;)
&gt;&gt; NoRecovery = $true
&gt;&gt; WithReplace = $true
&gt;&gt; StandbyDirectory = 'C:\dbatools\standby'
&gt;&gt; }
&gt;&gt;
PS C:\&gt; $files | Restore-DbaDatabase @params
PS C:\&gt; Invoke-DbaQuery -SQLInstance server\instance1 -Query &quot;select top 1 * from Restored.dbo.steps order by dt desc&quot;
PS C:\&gt; $params.RestoredTime = (get-date &quot;15:09:30 22/05/2017&quot;)
PS C:\&gt; $params.NoRecovery = $false
PS C:\&gt; $params.Add(&quot;Continue&quot;,$true)
PS C:\&gt; $files | Restore-DbaDatabase @params
PS C:\&gt; Invoke-DbaQuery -SQLInstance server\instance1 -Query &quot;select top 1 * from restored.dbo.steps order by dt desc&quot;
PS C:\&gt; Restore-DbaDatabase -SqlInstance server\instance1 -DestinationFilePrefix prefix -DatabaseName Restored -Continue -WithReplace
</code></pre>
<p>In this example we step through the backup files held in c:\dbatools\db1 folder.<br>
First we restore the database to a point in time in standby mode. This means we can check some details in the databases<br>
We then roll it on a further 9 minutes to perform some more checks<br>
And finally we continue by rolling it all the way forward to the latest point in the backup.<br>
At each step, only the log files needed to roll the database forward are restored.<br></p>
<h5 id="example-11">Example:  11</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server\instance1 -Path c:\backups -DatabaseName example1 -NoRecovery
PS C:\&gt; Restore-DbaDatabase -SqlInstance server\instance1 -Recover -DatabaseName example1
</code></pre>
<p>In this example we restore example1 database with no recovery, and then the second call is to set the database to recovery.<br></p>
<h5 id="example-12">Example:  12</h5>
<pre><code>PS C:\&gt; Get-DbaDbBackupHistory - SqlInstance server\instance1 -Database ProdFinance -Last | Restore-DbaDatabase -PageRestore
PS C:\&gt; $SuspectPage -PageRestoreTailFolder c:\temp -TrustDbBackupHistory
</code></pre>
<p>Gets a list of Suspect Pages using Get-DbaSuspectPage. The uses Get-DbaDbBackupHistory and Restore-DbaDatabase to perform a restore of the suspect pages and bring them up to date<br>
If server\instance1 is Enterprise edition this will be done online, if not it will be performed offline<br></p>
<h5 id="example-13">Example:  13</h5>
<pre><code>PS C:\&gt; $BackupHistory = Get-DbaBackupInformation -SqlInstance sql2005 -Path \\backups\sql2000\ProdDb
PS C:\&gt; $BackupHistory | Restore-DbaDatabase -SqlInstance sql2000 -TrustDbBackupHistory
</code></pre>
<p>Due to SQL Server 2000 not returning all the backup headers we cannot restore directly. As this is an issues with the SQL engine all we can offer is the following workaround<br>
This will use a SQL Server instance &gt; 2000 to read the headers, and then pass them in to Restore-DbaDatabase as a BackupHistory object.<br></p>
<h5 id="example-14">Example:  14</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1\instance1 -Path &quot;C:\Temp\devops_prod_full.bak&quot; -DatabaseName &quot;DevOps_DEV&quot; -ReplaceDbNameInFile
PS C:\&gt; Rename-DbaDatabase -SqlInstance server1\instance1 -Database &quot;DevOps_DEV&quot; -LogicalName &quot;&lt;DBN&gt;_&lt;FT&gt;&quot;
</code></pre>
<p>This will restore the database from the &quot;C:\Temp\devops_prod_full.bak&quot; file, with the new name &quot;DevOps_DEV&quot; and store the different physical files with the new name. It will use the system default <br>
configured data and log locations.<br>
After the restore the logical names of the database files will be renamed with the &quot;DevOps_DEV_ROWS&quot; for MDF/NDF and &quot;DevOps_DEV_LOG&quot; for LDF<br></p>
<h5 id="example-15">Example:  15</h5>
<pre><code>PS C:\&gt; $FileStructure = @{
&gt;&gt; 'database_data' = 'C:\Data\database_data.mdf'
&gt;&gt; 'database_log' = 'C:\Log\database_log.ldf'
&gt;&gt; }
&gt;&gt;
PS C:\&gt; Restore-DbaDatabase -SqlInstance server1 -Path \\ServerName\ShareName\File -DatabaseName database -FileMapping $FileStructure
</code></pre>
<p>Restores 'database' to 'server1' and moves the files to new locations. The format for the $FileStructure HashTable is the file logical name as the Key, and the new location as the Value.<br></p>
<h5 id="example-16">Example:  16</h5>
<pre><code>PS C:\&gt; Restore-DbaDatabase -SqlInstance server1 -Path \\ServerName\ShareName\File -DatabaseName database -DatabaseName database -StopMark OvernightStart -StopBefore -StopAfterDate Get-Date('21:00
</code></pre>
<p>10/05/2020')<br>
Restores the backups from \ServerName\ShareName\File as database, stops before the first 'OvernightStop' mark that occurs after '21:00 10/05/2020'.<br>
Note that Date time needs to be specified in your local SQL Server culture<br></p>
<h3 id="required-parameters">Required Parameters</h3>
<h5 id="sqlinstance">-SqlInstance</h5>
<p>The target SQL Server instance.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>True</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="path">-Path</h5>
<p>Path to SQL Server backup files.
Paths passed in as strings will be scanned using the desired method, default is a non recursive folder scan
Accepts multiple paths separated by ','
Or it can consist of FileInfo objects, such as the output of Get-ChildItem or Get-Item. This allows you to work with
your own file structures as needed<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>True</td>
</tr>
<tr>
<td>Pipeline</td>
<td>true (ByValue)</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="pagerestore">-PageRestore</h5>
<p>Passes in an object from Get-DbaSuspectPages containing suspect pages from a single database.
Setting this Parameter will cause an Online Page restore if the target Instance is Enterprise Edition, or offline if not.
This will involve taking a tail log backup, so you must check your restore chain once it has completed<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>True</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="pagerestoretailfolder">-PageRestoreTailFolder</h5>
<p>This parameter passes in a location for the tail log backup required for page level restore<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>True</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="optional-parameters">Optional Parameters</h3>
<h5 id="sqlcredential">-SqlCredential</h5>
<p>Login to the target instance using alternative credentials. Accepts PowerShell credentials (Get-Credential).
Windows Authentication, SQL Server Authentication, Active Directory - Password, and Active Directory - Integrated are all supported.
For MFA support, please use Connect-DbaInstance.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="databasename">-DatabaseName</h5>
<p>Name to restore the database under.
Only works with a single database restore. If multiple database are found in the provided paths then we will exit<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td>Name</td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>true (ByValue)</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="destinationdatadirectory">-DestinationDataDirectory</h5>
<p>Path to restore the SQL Server backups to on the target instance.
If only this parameter is specified, then all database files (data and log) will be restored to this location<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="destinationlogdirectory">-DestinationLogDirectory</h5>
<p>Path to restore the database log files to.
This parameter can only be specified alongside DestinationDataDirectory.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="destinationfilestreamdirectory">-DestinationFileStreamDirectory</h5>
<p>Path to restore FileStream data to
This parameter can only be specified alongside DestinationDataDirectory<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="restoretime">-RestoreTime</h5>
<p>Specify a DateTime object to which you want the database restored to. Default is to the latest point  available in the specified backups<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>(Get-Date).AddYears(1)</td>
</tr>
</tbody>
</table>
<h5 id="norecovery">-NoRecovery</h5>
<p>Indicates if the databases should be recovered after last restore. Default is to recover<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="withreplace">-WithReplace</h5>
<p>Switch indicated is the restore is allowed to replace an existing database.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="keepreplication">-KeepReplication</h5>
<p>Indicates whether replication configuration should be restored as part of the database restore operation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="xpdirtree">-XpDirTree</h5>
<p>Switch that indicated file scanning should be performed by the SQL Server instance using xp_dirtree
This will scan recursively from the passed in path
You must have sysadmin role membership on the instance for this to work.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="outputscriptonly">-OutputScriptOnly</h5>
<p>Switch indicates that ONLY T-SQL scripts should be generated, no restore takes place
Due to the limitations of SMO, this switch cannot be combined with VeriyOnly, and a warning will be raised if it is.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="verifyonly">-VerifyOnly</h5>
<p>Switch indicate that restore should be verified.
Due to the limitations of SMO, this switch cannot be combined with OutputScriptOnly, and a warning will be raised if it is.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="maintenancesolutionbackup">-MaintenanceSolutionBackup</h5>
<p>Switch to indicate the backup files are in a folder structure as created by Ola Hallengreen's maintenance scripts.
This switch enables a faster check for suitable backups. Other options require all files to be read first to ensure we have an anchoring full backup. Because we can rely on specific locations for
backups performed with OlaHallengren's backup solution, we can rely on file locations.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="filemapping">-FileMapping</h5>
<p>A hashtable that can be used to move specific files to a location.
<code>$FileMapping = @{'DataFile1'='c:\restoredfiles\Datafile1.mdf';'DataFile3'='d:\DataFile3.mdf'}</code>
And files not specified in the mapping will be restored to their original location
This Parameter is exclusive with DestinationDataDirectory<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="ignorelogbackup">-IgnoreLogBackup</h5>
<p>This switch tells the function to ignore transaction log backups. The process will restore to the latest full or differential backup point only<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="ignorediffbackup">-IgnoreDiffBackup</h5>
<p>This switch tells the function to ignore differential backups. The process will restore to the latest full and onwards with transaction log backups only<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="usedestinationdefaultdirectories">-UseDestinationDefaultDirectories</h5>
<p>Switch that tells the restore to use the default Data and Log locations on the target server. If they don't exist, the function will try to create them<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="reusesourcefolderstructure">-ReuseSourceFolderStructure</h5>
<p>By default, databases will be migrated to the destination Sql Server's default data and log directories. You can override this by specifying -ReuseSourceFolderStructure.
The same structure on the SOURCE will be kept exactly, so consider this if you're migrating between different versions and use part of Microsoft's default Sql structure (MSSql12.INSTANCE, etc)
*Note, to reuse destination folder structure, specify -WithReplace<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="destinationfileprefix">-DestinationFilePrefix</h5>
<p>This value will be prefixed to ALL restored files (log and data). This is just a simple string prefix. If you want to perform more complex rename operations then please use the FileMapping parameter
This will apply to all file move options, except for FileMapping<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="restoreddatabasenameprefix">-RestoredDatabaseNamePrefix</h5>
<p>A string which will be prefixed to the start of the restore Database's Name
Useful if restoring a copy to the same sql server for testing.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="trustdbbackuphistory">-TrustDbBackupHistory</h5>
<p>This switch can be used when piping the output of Get-DbaDbBackupHistory or Backup-DbaDatabase into this command.
It allows the user to say that they trust that the output from those commands is correct, and skips the file header read portion of the process. This means a faster process, but at the risk of not
knowing till halfway through the restore that something is wrong with a file.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="maxtransfersize">-MaxTransferSize</h5>
<p>Parameter to set the unit of transfer. Values must be a multiple by 64kb<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>0</td>
</tr>
</tbody>
</table>
<h5 id="blocksize">-BlockSize</h5>
<p>Specifies the block size to use. Must be one of 0.5kb,1kb,2kb,4kb,8kb,16kb,32kb or 64kb
Can be specified in bytes
Refer to <a href="https://msdn.microsoft.com/en-us/library/ms178615.aspx">https://msdn.microsoft.com/en-us/library/ms178615.aspx</a> for more detail<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>0</td>
</tr>
</tbody>
</table>
<h5 id="buffercount">-BufferCount</h5>
<p>Number of I/O buffers to use to perform the operation.
Refer to <a href="https://msdn.microsoft.com/en-us/library/ms178615.aspx">https://msdn.microsoft.com/en-us/library/ms178615.aspx</a> for more detail<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>0</td>
</tr>
</tbody>
</table>
<h5 id="directoryrecurse">-DirectoryRecurse</h5>
<p>If specified the specified directory will be recursed into<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="enableexception">-EnableException</h5>
<p>By default, when something goes wrong we try to catch it, interpret it and give you a friendly warning message.
This avoids overwhelming you with &quot;sea of red&quot; exceptions, but is inconvenient because it basically disables advanced scripting.
Using this switch turns this &quot;nice by default&quot; feature off and enables you to catch exceptions with your own try/catch.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="standbydirectory">-StandbyDirectory</h5>
<p>If a directory is specified the database(s) will be restored into a standby state, with the standby file placed into this directory (which must exist, and be writable by the target Sql Server
instance)<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="continue">-Continue</h5>
<p>If specified we will to attempt to recover more transaction log backups onto  database(s) in Recovering or Standby states
When specified, WithReplace will be set to true<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="executeas">-ExecuteAs</h5>
<p>If value provided the restore will be executed under this login's context. The login must exist, and have the relevant permissions to perform the restore<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="azurecredential">-AzureCredential</h5>
<p>The name of the SQL Server credential to be used if restoring from an Azure hosted backup using Storage Access Keys
If a backup path beginning http is passed in and this parameter is not specified then if a credential with a name matching the URL<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="replacedbnameinfile">-ReplaceDbNameInFile</h5>
<p>If switch set and occurrence of the original database's name in a data or log file will be replace with the name specified in the DatabaseName parameter<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="destinationfilesuffix">-DestinationFileSuffix</h5>
<p>This value will be suffixed to ALL restored files (log and data). This is just a simple string suffix. If you want to perform more complex rename operations then please use the FileMapping parameter
This will apply to all file move options, except for FileMapping<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="recover">-Recover</h5>
<p>If set will perform recovery on the indicated database<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="keepcdc">-KeepCDC</h5>
<p>Indicates whether CDC information should be restored as part of the database<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="getbackupinformation">-GetBackupInformation</h5>
<p>Passing a string value into this parameter will cause a global variable to be created holding the output of Get-DbaBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="stopaftergetbackupinformation">-StopAfterGetBackupInformation</h5>
<p>Switch which will cause the function to exit after returning GetBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="selectbackupinformation">-SelectBackupInformation</h5>
<p>Passing a string value into this parameter will cause a global variable to be created holding the output of Select-DbaBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="stopafterselectbackupinformation">-StopAfterSelectBackupInformation</h5>
<p>Switch which will cause the function to exit after returning SelectBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="formatbackupinformation">-FormatBackupInformation</h5>
<p>Passing a string value into this parameter will cause a global variable to be created holding the output of Format-DbaBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="stopafterformatbackupinformation">-StopAfterFormatBackupInformation</h5>
<p>Switch which will cause the function to exit after returning FormatBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="testbackupinformation">-TestBackupInformation</h5>
<p>Passing a string value into this parameter will cause a global variable to be created holding the output of Test-DbaBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="stopaftertestbackupinformation">-StopAfterTestBackupInformation</h5>
<p>Switch which will cause the function to exit after returning TestBackupInformation<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="stopbefore">-StopBefore</h5>
<p>Switch to indicate the restore should stop before StopMark occurs, default is to stop when mark is created.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<h5 id="stopmark">-StopMark</h5>
<p>Marked point in the transaction log to stop the restore at (Mark is created via BEGIN TRANSACTION
(<a href="https://docs.microsoft.com/en-us/sql/t-sql/language-elements/begin-transaction-transact-sql?view=sql-server-ver15">https://docs.microsoft.com/en-us/sql/t-sql/language-elements/begin-transaction-transact-sql?view=sql-server-ver15</a>))<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="stopafterdate">-StopAfterDate</h5>
<p>By default the restore will stop at the first occurence of StopMark found in the chain, passing a datetime where will cause it to stop the first StopMark atfer that datetime<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>(Get-Date '01/01/1971')</td>
</tr>
</tbody>
</table>
<h5 id="statementtimeout">-StatementTimeout</h5>
<p>Timeout in minutes. Defaults to infinity (restores can take a while.)<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>0</td>
</tr>
</tbody>
</table>
<h5 id="whatif">-WhatIf</h5>
<p>Shows what would happen if the command would execute, but does not actually perform the command<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td>wi</td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="confirm">-Confirm</h5>
<p>Prompts to confirm certain actions<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td>cf</td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<p> </p>
<p>Want to see the source code for this command? Check out <a href="https://github.com/sqlcollaborative/dbatools/blob/master/functions/Restore-DbaDatabase.ps1">Restore-DbaDatabase</a> on GitHub.
<br>
Want to see the Bill Of Health for this command? Check out <a href="https://sqlcollaborative.github.io/boh#Restore-DbaDatabase">Restore-DbaDatabase</a>.</p>

                </div> <!-- rendered -->
            </div>
        </div>
    </div>
</body>

</html>
