<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>dbatools docs | Find-DbaInstance</title>
    <link rel="icon" href="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png" sizes="32x32">
    <link rel="icon" href="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png" sizes="192x192">
    <link rel="apple-touch-icon-precomposed" href="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png">
    <meta name="msapplication-TileImage" content="https://dbatools.io/wp-content/uploads/2016/05/dbatools.png">

    <link title="Search" rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml">
    <meta name="keywords" content="dbatools, ,powershell,sql server,devops,json">
    <meta name="subtitle" content="Docs for Find-DbaInstance">
    <meta property="og:type" content="article" />
    <meta property="og:title" content="dbatools docs:  Find-DbaInstance" />
    <meta property="og:url" content="https://docs.dbatools.io/Find-DbaInstance.html" />
    <meta property="og:description" content="dbatools docs for Find-DbaInstance" />
    <meta property="og:site_name" content="docs.dbatools.io" />
    <meta property="og:locale" content="en_US" />
    <meta name="twitter:text:title" content="dbatools docs:  Find-DbaInstance" />

    <meta name="twitter:image" content="https://docs.dbatools.io/assets/thumbs/Find-DbaInstance.png">
    <meta name="twitter:card" content="summary_large_image">

    <meta name=twitter:creator content="@psdbatools">
    <meta name=twitter:title content="dbatools docs:  Find-DbaInstance">
    <meta property="twitter:site" content="@psdbatools" />

    <meta property="og:image" content="https://docs.dbatools.io/assets/thumbs/Find-DbaInstance.png">
    <link rel=canonical href="https://docs.dbatools.io/Find-DbaInstance.html" />
    <link rel=alternate type=application/json
        href=https://raw.githubusercontent.com/dataplat/dbatools/master/bin/dbatools-index.json
        title="dbatools documentation">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css"
        href="//cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

    <link rel="stylesheet" href="assets/css/layout.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80639740-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-80639740-2');
    </script>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/lodash@4.17.4/lodash.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.jsdelivr.net/jquery.scrollto/2.1.2/jquery.scrollTo.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/autolinker/1.7.1/Autolinker.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jqcloud2@2.0.3/dist/jqcloud.min.js"
        integrity="sha256-+krhsKJpvd3AZYVGHcwyCUGO01uNdGSTvqR7Apcy30E=" crossorigin="anonymous"></script>

    <script type="text/javascript" language="javascript">
        function register_dbatools_hljs(dbatoolscommands) {

            hljs.registerLanguage("powershell", function (e) {
                var t = {
                    b: "`[\\s\\S]",
                    r: 0
                },
                    o = {
                        cN: "variable",
                        v: [{
                            b: /\$[\w\d][\w\d_:]*/
                        }]
                    },
                    r = {
                        cN: "literal",
                        b: /\$(null|true|false)\b/
                    },
                    n = {
                        cN: "string",
                        v: [{
                            b: /"/,
                            e: /"/
                        }, {
                            b: /@"/,
                            e: /^"@/
                        }],
                        c: [t, o, {
                            cN: "variable",
                            b: /\$[A-z]/,
                            e: /[^A-z]/
                        }]
                    },
                    a = {
                        cN: "string",
                        v: [{
                            b: /'/,
                            e: /'/
                        }, {
                            b: /@'/,
                            e: /^'@/
                        }]
                    },
                    i = {
                        cN: "doctag",
                        v: [{
                            b: /\.(synopsis|description|example|inputs|outputs|notes|link|component|role|functionality)/
                        }, {
                            b: /\.(parameter|forwardhelptargetname|forwardhelpcategory|remotehelprunspace|externalhelp)\s+\S+/
                        }]
                    },
                    s = e.inherit(e.C(null, null), {
                        v: [{
                            b: /#/,
                            e: /$/
                        }, {
                            b: /<#/,
                            e: /#>/
                        }],
                        c: [i]
                    });
                return {
                    aliases: ["ps"],
                    l: /-?[A-z\.\-]+/,
                    cI: !0,
                    k: {
                        keyword: "if else foreach return function do while until elseif begin for trap data dynamicparam end break throw param continue finally in switch exit filter try process catch",
                        built_in: dbatoolscommands + " Add-Computer Add-Content Add-History Add-JobTrigger Add-Member Add-PSSnapin Add-Type Checkpoint-Computer Clear-Content Clear-EventLog Clear-History Clear-Host Clear-Item Clear-ItemProperty Clear-Variable Compare-Object Complete-Transaction Connect-PSSession Connect-WSMan Convert-Path ConvertFrom-Csv ConvertFrom-Json ConvertFrom-SecureString ConvertFrom-StringData ConvertTo-Csv ConvertTo-Html ConvertTo-Json ConvertTo-SecureString ConvertTo-Xml Copy-Item Copy-ItemProperty Debug-Process Disable-ComputerRestore Disable-JobTrigger Disable-PSBreakpoint Disable-PSRemoting Disable-PSSessionConfiguration Disable-WSManCredSSP Disconnect-PSSession Disconnect-WSMan Disable-ScheduledJob Enable-ComputerRestore Enable-JobTrigger Enable-PSBreakpoint Enable-PSRemoting Enable-PSSessionConfiguration Enable-ScheduledJob Enable-WSManCredSSP Enter-PSSession Exit-PSSession Export-Alias Export-Clixml Export-Console Export-Counter Export-Csv Export-FormatData Export-ModuleMember Export-PSSession ForEach-Object Format-Custom Format-List Format-Table Format-Wide Get-Acl Get-Alias Get-AuthenticodeSignature Get-ChildItem Get-Command Get-ComputerRestorePoint Get-Content Get-ControlPanelItem Get-Counter Get-Credential Get-Culture Get-Date Get-Event Get-EventLog Get-EventSubscriber Get-ExecutionPolicy Get-FormatData Get-Host Get-HotFix Get-Help Get-History Get-IseSnippet Get-Item Get-ItemProperty Get-Job Get-JobTrigger Get-Location Get-Member Get-Module Get-PfxCertificate Get-Process Get-PSBreakpoint Get-PSCallStack Get-PSDrive Get-PSProvider Get-PSSession Get-PSSessionConfiguration Get-PSSnapin Get-Random Get-ScheduledJob Get-ScheduledJobOption Get-Service Get-TraceSource Get-Transaction Get-TypeData Get-UICulture Get-Unique Get-Variable Get-Verb Get-WinEvent Get-WmiObject Get-WSManCredSSP Get-WSManInstance Group-Object Import-Alias Import-Clixml Import-Counter Import-Csv Import-IseSnippet Import-LocalizedData Import-PSSession Import-Module Invoke-AsWorkflow Invoke-Command Invoke-Expression Invoke-History Invoke-Item Invoke-RestMethod Invoke-WebRequest Invoke-WmiMethod Invoke-WSManAction Join-Path Limit-EventLog Measure-Command Measure-Object Move-Item Move-ItemProperty New-Alias New-Event New-EventLog New-IseSnippet New-Item New-ItemProperty New-JobTrigger New-Object New-Module New-ModuleManifest New-PSDrive New-PSSession New-PSSessionConfigurationFile New-PSSessionOption New-PSTransportOption New-PSWorkflowExecutionOption New-PSWorkflowSession New-ScheduledJobOption New-Service New-TimeSpan New-Variable New-WebServiceProxy New-WinEvent New-WSManInstance New-WSManSessionOption Out-Default Out-File Out-GridView Out-Host Out-Null Out-Printer Out-String Pop-Location Push-Location Read-Host Receive-Job Register-EngineEvent Register-ObjectEvent Register-PSSessionConfiguration Register-ScheduledJob Register-WmiEvent Remove-Computer Remove-Event Remove-EventLog Remove-Item Remove-ItemProperty Remove-Job Remove-JobTrigger Remove-Module Remove-PSBreakpoint Remove-PSDrive Remove-PSSession Remove-PSSnapin Remove-TypeData Remove-Variable Remove-WmiObject Remove-WSManInstance Rename-Computer Rename-Item Rename-ItemProperty Reset-ComputerMachinePassword Resolve-Path Restart-Computer Restart-Service Restore-Computer Resume-Job Resume-Service Save-Help Select-Object Select-String Select-Xml Send-MailMessage Set-Acl Set-Alias Set-AuthenticodeSignature Set-Content Set-Date Set-ExecutionPolicy Set-Item Set-ItemProperty Set-JobTrigger Set-Location Set-PSBreakpoint Set-PSDebug Set-PSSessionConfiguration Set-ScheduledJob Set-ScheduledJobOption Set-Service Set-StrictMode Set-TraceSource Set-Variable Set-WmiInstance Set-WSManInstance Set-WSManQuickConfig Show-Command Show-ControlPanelItem Show-EventLog Sort-Object Split-Path Start-Job Start-Process Start-Service Start-Sleep Start-Transaction Start-Transcript Stop-Computer Stop-Job Stop-Process Stop-Service Stop-Transcript Suspend-Job Suspend-Service Tee-Object Test-ComputerSecureChannel Test-Connection Test-ModuleManifest Test-Path Test-PSSessionConfigurationFile Trace-Command Unblock-File Undo-Transaction Unregister-Event Unregister-PSSessionConfiguration Unregister-ScheduledJob Update-FormatData Update-Help Update-List Update-TypeData Use-Transaction Wait-Event Wait-Job Wait-Process Where-Object Write-Debug Write-Error Write-EventLog Write-Host Write-Output Write-Progress Write-Verbose Write-Warning Add-MDTPersistentDrive Disable-MDTMonitorService Enable-MDTMonitorService Get-MDTDeploymentShareStatistics Get-MDTMonitorData Get-MDTOperatingSystemCatalog Get-MDTPersistentDrive Import-MDTApplication Import-MDTDriver Import-MDTOperatingSystem Import-MDTPackage Import-MDTTaskSequence New-MDTDatabase Remove-MDTMonitorData Remove-MDTPersistentDrive Restore-MDTPersistentDrive Set-MDTMonitorData Test-MDTDeploymentShare Test-MDTMonitorData Update-MDTDatabaseSchema Update-MDTDeploymentShare Update-MDTLinkedDS Update-MDTMedia Update-MDTMedia Add-VamtProductKey Export-VamtData Find-VamtManagedMachine Get-VamtConfirmationId Get-VamtProduct Get-VamtProductKey Import-VamtData Initialize-VamtData Install-VamtConfirmationId Install-VamtProductActivation Install-VamtProductKey Update-VamtProduct",
                        nomarkup: "-ne -eq -lt -gt -ge -le -not -like -notlike -match -notmatch -contains -notcontains -in -notin -replace"
                    },
                    c: [t, e.NM, n, a, r, o, s]
                }
            });

        }
        $(document).ready(function () {
            function render_doc(doc_to_render, examples_mode) {

                $("#rendered h5").each(function (i, el) {
                    if ($(el).text().startsWith('-')) {
                        $(el).addClass('param')
                    }
                })
                $('#rendered table').addClass('table table-sm table-hover')
                if (examples_mode == 'new') {
                    $('#rendered code').addClass('powershell')
                }
                $('#rendered code').each(function (i, block) {
                    hljs.highlightBlock(block);
                })
                var authorcontent = $("td:contains('Author')").next('td').addClass('dbatools_author').text()
                $("#rendered .dbatools_author").html(Autolinker.link(authorcontent, {
                    className: 'myLink',
                    mention: 'twitter'
                })
                )
                $("#rendered h2#syntax").next().find('code').addClass('wrapped')
                if (ClipboardJS.isSupported()) {
                    $("#rendered h5[id^='example-']").append('<div class="bd-clipboard"><button class="btn-clipboard" title="Copy to clipboard">Copy</button></div>')
                    new ClipboardJS('.btn-clipboard', {
                        text: function (trigger) {
                            var textlines = $(trigger).parent().parent().next('pre').find('code').text().split('\n')
                            var copied = []
                            _.forEach(textlines, function (row) {
                                copied.push(row.replace(/^PS C:\\> /, "").replace(/^>>/, ""))
                            })
                            return _.join(copied, '\n')
                        }
                    });
                }


                //not all code is a block
                $("#rendered h3[id*='-parameters']").nextAll().find('code').addClass('hljs-inline')
                $('#rendered #description').nextUntil('#rendered #syntax').find('code').addClass('hljs-inline')
            }

            $('#loader').removeClass('invisible')
            var index_url = 'assets/dbatools-index.json'
            var external_url = 'assets/external.json'
            var values = [];
            var options = {
                valueNames: ['CommandName', 'Description', 'Alias', 'Examples', 'Params'],
                item: '<a class="list-group-item" href="#"><span class="CommandName"></span></a>'
            }
            cmdlist = new List('cmdlist', options, values);
            var indexhelp = ''
            var allcmds = $.getJSON(index_url, function (data) {
                indexhelp = data
                cmdlist.add(data)
                var dbacommands = []
                var cloudlist = {}
                _.forEach(data, function (el) {
                    dbacommands.push(el.CommandName)
                    if (_.isArray(el.Tags)) {
                        _.forEach(el.Tags, function (el) {
                            if (!_.has(cloudlist, el)) {
                                cloudlist[el] = 0
                            }
                            cloudlist[el] += 1
                        })
                    } else if (!_.isUndefined(el.Tags)){
                        if (!_.has(cloudlist, el.Tags)) {
                            cloudlist[el.Tags] = 0
                        }
                        cloudlist[el.Tags] += 1
                    }
                })
                var weightedVals = []
                _.forEach(cloudlist, function (value, key) {
                    weightedVals.push({
                        text: key,
                        weight: value,
                        handlers: {
                            click: function () { $('#search-ft').val('tag:' + key).trigger('keyup') }
                        }
                    })
                })
                var pixelHeight = window.innerHeight * 0.65;
                $('#canvas').css({ 'height': pixelHeight + 'px' });
                $('#canvas').jQCloud(weightedVals, {
                    autoResize: true
                });

                register_dbatools_hljs(dbacommands.join(' '))
                $(window).trigger('hashchange');
            })
            var options2 = {
                valueNames: ['extName', { name: 'extHref', attr: 'href' }],
                item: '<div><a class="list-group-item list-group-item-secondary extHref" href="#" _target="_blank"><span class="extName"></span></a></div>'
            }
            extlist = new List('extlist', options2, [])

            $.getJSON(external_url, function (data) {
                $('#dbatools_version').text('(v ' + data.version + ')')
                _.forEach(data.external_links, function (el) {
                    extlist.add({ 'extName': el.name, 'extHref': el.href })
                })
            })
            cmdlist.on('searchComplete', function (e) {
                if (cmdlist.matchingItems.length === 0) {
                    var searchString = $('#search-ft').val().trim();
                    if (searchString.length > 0 && !searchString.startsWith("ft:")) {
                        if (searchString != "f" && searchString != "ft" && searchString != "ft:") {
                            $('#search-ft').val("ft:" + searchString)
                        }
                    }
                }
            })
            $(document).on('mouseenter', '#cmdlist', function (e) {
                $('#search-ft').blur();
            })
            cmdlist.on('updated', function() {
                $('#cmdlist a').each(function(i, el) {
                    $(el).attr('href', $(el).find('span.CommandName').text())
                })
            })
            $('#cmdlist').on('mouseenter', 'a', function (e) {
                $(this).attr('href', $(this).find('span.CommandName').text());
                /*
                e.preventDefault();
                window.location.href = $(this).find('span.CommandName').text()
                ---
                window.location.hash = '#' + $(this).find('span.CommandName').text();
                $('#cmdlist').find('a.active').removeClass('active')
                $(this).addClass('active')
                */
            })
            $('#search-ft').bind('change keyup', function () {
                var searchString = $(this).val();
                if (searchString.trim() == "ft:" || searchString.trim() == "tag:") {
                    extlist.search();
                }
                else if (searchString.startsWith("ft:")) {
                    searchString = searchString.substring(3).trim();
                    if (cmdlist.filtered) {
                        cmdlist.filter();
                    }
                    cmdlist.search(searchString, ['CommandName', 'Alias', 'Description', 'Synopsis', 'Examples', 'Params']);
                } else if (searchString.startsWith("tag:")) {
                    searchString = searchString.substring(4).trim();
                    if (cmdlist.searched) {
                        cmdlist.search();
                    }
                    cmdlist.filter(function (item) {
                        if (_.indexOf(item.values().Tags, searchString) !== -1) {
                            return true;
                        } else {
                            return false;
                        }
                    });
                } else {
                    if (cmdlist.filtered) {
                        cmdlist.filter();
                    }
                    cmdlist.search(searchString, ['CommandName', 'Alias']);
                }
                extlist.search('$$$')
                if (_.isEmpty(searchString)) {
                    extlist.search()
                    cmdlist.filter()
                }
            })
            $('#clear-search').on('click', function () {
                $('#search-ft').val('').trigger('keyup')
            })
            $(window).on('hashchange', function (e) {
                var hash = window.location.hash.substr(1);
                var pagename = window.location.pathname.split("/").filter(function (c) { return c.length; }).pop();
                if (_.isUndefined(pagename)) {
                    pagename = ''
                } else {
                    pagename = pagename.split('.')[0];
                }
                if (hash.length == 0) {
                    hash = pagename
                }
                if (hash.length > 0) {
                    //ends with /
                    if (_.endsWith(hash, '/')) {
                        window.location.hash = '#' + hash.slice(0, hash.length - 1)
                        $(window).trigger('hashchange');
                        return;
                    }
                    //exact match
                    var topublish = _.findIndex(indexhelp, { 'Name': hash })
                    if (topublish == -1) {
                        //lowercase match
                        var topublish = _.findIndex(indexhelp, function (el) { return _.toLower(el.Name) == _.toLower(hash) })
                        if (topublish == -1) {
                            //alias match
                            var topublish = _.findIndex(indexhelp, { 'Alias': hash })
                            if (topublish == -1) {
                                //lowercase alias match
                                var topublish = _.findIndex(indexhelp, function (el) { return _.toLower(el.Alias) == _.toLower(hash) })
                            }
                            if (topublish == -1) {
                                //multiple aliases, optionally lowercased
                                var topublish = _.findIndex(indexhelp, function (el) { return _.includes(_.toLower(el.Alias).split(','), _.toLower(hash)) })
                            }
                        }
                        if (topublish !== -1) {
                            //normalization of URI
                            window.location.hash = '#' + indexhelp[topublish].CommandName
                            $(window).trigger('hashchange')
                            return;
                        }
                    }
                    if (topublish == -1) {
                        $('#rendered').html(marked.parse('### 404 Function not found \n (while searching for ' + hash + '). Please visit dbatools.io/commands for an updated index of current commands.'));
                    } else {
                        var doc_to_render = indexhelp[topublish]
                        render_doc(doc_to_render, 'new')
                        $("body").data("doc_to_render", indexhelp[topublish])
                        if ($("#headscroll").offset().top > 150) {
                            $(window).scrollTo('#headscroll')
                        } else {
                            $(window).scrollTo(0, 800)
                        }
                    }
                } else {
                    $('#loader').addClass('invisible')
                }
            })
            $(window).scroll(function () {
                if ($(this).scrollTop() > 50) {
                    $('#back-to-top').fadeIn();
                } else {
                    $('#back-to-top').fadeOut();
                }
            })
            $('#back-to-top').click(function () {
                $(window).scrollTo(0, 800)
                return false;
            })

        })
    </script>
</head>


<body>

    <nav class="navbar navbar-expand-md customnav">
        <a href="https://docs.dbatools.io/" class="navbar-brand" rel="home" itemprop="url">
            <img width="265" height="64" src="https://dbatools.io/images/dbatools-docs.png"
                class="custom-logo" alt="dbatools" itemprop="logo" scale="0">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
            aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="oi oi-menu"></span>
        </button>
        <div class="collapse navbar-collapse flex-grow-1 text-right" id="navbarCollapse">
            <ul class="navbar-nav ml-auto flex-nowrap">
                <li class="nav-item">
                    <a class="nav-link" style="color:#293E5D" href="https://dbatools.io/download/">⬇ download</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color:#293E5D" href="https://dbatools.io/commands/">🚀 commands</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color:#293E5D" href="https://dbatools.io/slack">🔍 find us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color:#293E5D" href="https://dbatools.io/builds">🔢 build ref</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color:#293E5D" href="https://dbatools.io/book">📘 dbatools book</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <hr />
            </div>
        </div>
        <div class="row">
            <div class="col-xl-3 col-lg-5 col-md-5 col-sm-12 bd-sidebar">
                <div id="relcommands" class="">
                    <h3>
                        commands
                        <small id="dbatools_version" class="text-muted"></small>
                    </h3>
                    <p></p>
                    <div class="form-group row">
                        <div class="col-lg-12">
                            <div class="input-group">

                                <input type="text" class="form-control" id="search-ft"
                                    placeholder="Search (&quot;ft: term&quot; enables fulltext)" autocomplete="off">
                                <div class="input-group-append">
                                    <div class="input-group-text" id="clear-search">Clear</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="extlist">
                        <div class="list list-group"></div>
                    </div>
                    <div id="cmdlist">
                        <div class="list list-group"></div>
                    </div>
                </div>
            </div>
            <div class="col-xl-9 col-lg-7 col-md-7 col-sm-12 bd-content">
                <div id="headscroll">
                    <a id="back-to-top" href="#" class="btn btn-primary btn-lg back-to-top" role="button"
                        title="Click to return on the top page">&#94;</a>
                </div>
                <div id="rendered">
                    <h1 id="find-dbainstance">Find-DbaInstance</h1>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Author</strong></td>
<td>Scott Sutherland, 2018 NetSPI , Friedrich Weinmann (@FredWeinmann)</td>
</tr>
<tr>
<td><strong>Availability</strong></td>
<td>Windows, Linux, macOS</td>
</tr>
</tbody>
</table>
<p> </p>
<p>Want to see the source code for this command? Check out <a href="https://github.com/dataplat/dbatools/blob/master/public/Find-DbaInstance.ps1">Find-DbaInstance</a> on GitHub.
<br>
Want to see the Bill Of Health for this command? Check out <a href="https://dataplat.github.io/boh#Find-DbaInstance">Find-DbaInstance</a>.</p>
<h2 id="synopsis">Synopsis</h2>
<p>Discovers SQL Server instances across networks using multiple scanning methods</p>
<h2 id="description">Description</h2>
<p>This function performs comprehensive SQL Server instance discovery across your network infrastructure using multiple detection methods. Perfect for creating complete SQL Server inventories, compliance auditing, and finding forgotten or undocumented instances that might pose security risks.</p>
<p>The function combines two distinct phases to systematically locate SQL Server instances:</p>
<p>Discovery Phase:<br />
Compiles target lists using several methods: Active Directory SPN lookups (finds registered SQL services), SQL Instance Enumeration (same method SSMS uses for browsing), IP address range scanning (scans entire subnets), and Domain Server searches (targets all Windows servers in AD).<br />
You can specify explicit computer lists via -ComputerName or use automated discovery via -DiscoveryType.</p>
<p>Scan Phase:<br />
Tests each discovered target using multiple verification methods: Browser service queries, WMI/CIM SQL service enumeration, TCP port connectivity testing (default 1433), DNS resolution checks, ping tests, and optional SQL connection attempts.<br />
Results include confidence levels (High/Medium/Low) based on scan success combinations.</p>
<p>Common DBA scenarios:</p>
<ul>
<li>Audit all SQL instances before migrations or compliance reviews</li>
<li>Discover shadow IT databases that bypass standard deployment processes</li>
<li>Inventory instances across acquired companies or merged networks</li>
<li>Validate disaster recovery documentation against actual running instances</li>
<li>Identify instances running on non-standard ports or with unusual configurations</li>
</ul>
<p>Security considerations:<br />
The Discovery phase is non-intrusive, but the Scan phase generates network traffic and authentication attempts across your infrastructure. This creates audit logs and may trigger security monitoring systems. Some scan types require elevated privileges for WMI access or SQL connections. Always coordinate with your security team before running network-wide scans, especially in regulated environments.</p>
<h2 id="syntax">Syntax</h2>
<pre><code>Find-DbaInstance
    [-Credential &lt;PSCredential&gt;]
    [-SqlCredential &lt;PSCredential&gt;]
    [-ScanType {TCPPort | SqlConnect | SqlService | DNSResolve | SPN | Browser | Ping | Default | All}]
    [-DomainController &lt;String&gt;]
    [-TCPPort &lt;Int32[]&gt;]
    [-MinimumConfidence {None | Low | Medium | High}]
    [-EnableException]
    [&lt;CommonParameters&gt;]

Find-DbaInstance -ComputerName &lt;DbaInstanceParameter[]&gt;
    [-Credential &lt;PSCredential&gt;]
    [-SqlCredential &lt;PSCredential&gt;]
    [-ScanType {TCPPort | SqlConnect | SqlService | DNSResolve | SPN | Browser | Ping | Default | All}]
    [-DomainController &lt;String&gt;]
    [-TCPPort &lt;Int32[]&gt;]
    [-MinimumConfidence {None | Low | Medium | High}]
    [-EnableException]
    [&lt;CommonParameters&gt;]

Find-DbaInstance -DiscoveryType {IPRange | DomainSPN | Domain | DataSourceEnumeration | DomainServer | All}
    [-Credential &lt;PSCredential&gt;]
    [-SqlCredential &lt;PSCredential&gt;]
    [-ScanType {TCPPort | SqlConnect | SqlService | DNSResolve | SPN | Browser | Ping | Default | All}]
    [-IpAddress &lt;String[]&gt;]
    [-DomainController &lt;String&gt;]
    [-TCPPort &lt;Int32[]&gt;]
    [-MinimumConfidence {None | Low | Medium | High}]
    [-EnableException]
    [&lt;CommonParameters&gt;]

</code></pre>
<p> </p>
<h2 id="examples">Examples</h2>
<p> </p>
<h5 id="example-1">Example:  1</h5>
<pre><code>PS C:\&gt; Find-DbaInstance -DiscoveryType Domain, DataSourceEnumeration
</code></pre>
<p>Performs a network search for SQL Instances by:<br></p>
<ul>
<li>Looking up the Service Principal Names of computers in Active Directory<br></li>
<li>Using the UDP broadcast based auto-discovery of SSMS<br>
After that it will extensively scan all hosts thus discovered for instances.<br></li>
</ul>
<h5 id="example-2">Example:  2</h5>
<pre><code>PS C:\&gt; Find-DbaInstance -DiscoveryType All
</code></pre>
<p>Performs a network search for SQL Instances, using all discovery protocols:<br></p>
<ul>
<li>Active directory search for Service Principal Names<br></li>
<li>SQL Instance Enumeration (same as SSMS does)<br></li>
<li>All IPAddresses in the current computer's subnets of all connected network interfaces<br>
Note: This scan will take a long time, due to including the IP Scan<br></li>
</ul>
<h5 id="example-3">Example:  3</h5>
<pre><code>PS C:\&gt; Get-ADComputer -Filter &quot;*&quot; | Find-DbaInstance
</code></pre>
<p>Scans all computers in the domain for SQL Instances, using a deep probe:<br></p>
<ul>
<li>Tries resolving the name in DNS<br></li>
<li>Tries pinging the computer<br></li>
<li>Tries listing all SQL Services using CIM/WMI<br></li>
<li>Tries discovering all instances via the browser service<br></li>
<li>Tries connecting to the default TCP Port (1433)<br></li>
<li>Tries connecting to the TCP port of each discovered instance<br></li>
<li>Tries to establish a SQL connection to the server using default windows credentials<br></li>
<li>Tries looking up the Service Principal Names for each instance<br></li>
</ul>
<h5 id="example-4">Example:  4</h5>
<pre><code>PS C:\&gt; Get-Content .\servers.txt | Find-DbaInstance -SqlCredential $cred -ScanType Browser, SqlConnect
</code></pre>
<p>Reads all servers from the servers.txt file (one server per line),<br>
then scans each of them for instances using the browser service<br>
and finally attempts to connect to each instance found using the specified credentials.<br>
then scans each of them for instances using the browser service and SqlService<br></p>
<h5 id="example-5">Example:  5</h5>
<pre><code>PS C:\&gt; Find-DbaInstance -ComputerName localhost | Get-DbaDatabase | Format-Table -Wrap
</code></pre>
<p>Scans localhost for instances using the browser service, traverses all instances for all databases and displays all information in a formatted table.<br></p>
<h5 id="example-6">Example:  6</h5>
<pre><code>PS C:\&gt; $databases = Find-DbaInstance -ComputerName localhost | Get-DbaDatabase
PS C:\&gt; $results = $databases | Select-Object SqlInstance, Name, Status, RecoveryModel, SizeMB, Compatibility, Owner, LastFullBackup, LastDiffBackup, LastLogBackup
PS C:\&gt; $results | Format-Table -Wrap
</code></pre>
<p>Scans localhost for instances using the browser service, traverses all instances for all databases and displays a subset of the important information in a formatted table.<br>
Using this method regularly is not recommended. Use Get-DbaService or Get-DbaRegServer instead.<br></p>
<h3 id="required-parameters">Required Parameters</h3>
<h5 id="computername">-ComputerName</h5>
<p>Specifies target computers to scan for SQL Server instances. Accepts computer names, IP addresses, or output from Get-ADComputer.<br />
Use this when you have a specific list of servers to inventory rather than performing network-wide discovery.<br />
Only the computer name portion is used - connection strings or SQL instance details are ignored. <br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>True</td>
</tr>
<tr>
<td>Pipeline</td>
<td>true (ByValue)</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="discoverytype">-DiscoveryType</h5>
<h2 id="specifies-which-automatic-discovery-methods-to-use-for-finding-sql-server-targets-across-your-network.choose-discovery-methods-based-on-your-environment-domainspn-for-registered-services-datasourceenumeration-for-broadcasting-instances-iprange-for-subnet-scanning-or-domainserver-for-all-windows-servers.combine-multiple-types-for-comprehensive-coverage-but-be-aware-that-iprange-scanning-can-be-time-intensive-on-large-networks">Specifies which automatic discovery methods to use for finding SQL Server targets across your network.
Choose discovery methods based on your environment: DomainSPN for registered services, DataSourceEnumeration for broadcasting instances, IPRange for subnet scanning, or DomainServer for all Windows
servers.
Combine multiple types for comprehensive coverage, but be aware that IPRange scanning can be time-intensive on large networks.</h2>
<ul>
<li>SPN Lookup<br />
The function tries to connect active directory to look up all computers with registered SQL Instances.<br />
Not all instances need to be registered properly, making this not 100% reliable.<br />
By default, your nearest Domain Controller is contacted for this scan.<br />
However it is possible to explicitly state the DC to contact using its DistinguishedName and the '-DomainController' parameter.<br />
If credentials were specified using the '-Credential' parameter, those same credentials are used to perform this lookup, allowing the scan of other domains.</li>
<li>SQL Instance Enumeration<br />
This uses the default UDP Broadcast based instance enumeration used by SSMS to detect instances.<br />
Note that the result from this is not used in the actual scan, but only to compile a list of computers to scan.<br />
To enable the same results for the scan, ensure that the 'Browser' scan is enabled.</li>
<li>IP Address range:<br />
This 'Discovery' uses a range of IPAddresses and simply passes them on to be tested.<br />
See the 'Description' part of help on security issues of network scanning.<br />
By default, it will enumerate all ethernet network adapters on the local computer and scan the entire subnet they are on.<br />
By using the '-IpAddress' parameter, custom network ranges can be specified.</li>
<li>Domain Server:<br />
This will discover every single computer in Active Directory that is a Windows Server and enabled.<br />
By default, your nearest Domain Controller is contacted for this scan.<br />
However it is possible to explicitly state the DC to contact using its DistinguishedName and the '-DomainController' parameter.<br />
If credentials were specified using the '-Credential' parameter, those same credentials are used to perform this lookup, allowing the scan of other domains. <br></li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>True</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="optional-parameters">Optional Parameters</h3>
<h5 id="credential">-Credential</h5>
<p>The credentials to use on windows network connection.<br />
These credentials are used for:</p>
<ul>
<li>Contact to domain controllers for SPN lookups (only if explicit Domain Controller is specified)</li>
<li>CIM/WMI contact to the scanned computers during the scan phase (see the '-ScanType' parameter documentation on affected scans).<br></li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="sqlcredential">-SqlCredential</h5>
<p>The credentials used to connect to SqlInstances to during the scan phase.<br />
See the '-ScanType' parameter documentation on affected scans.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="scantype">-ScanType</h5>
<p>Controls which verification methods are used to detect and validate SQL Server instances on target computers.<br />
Use specific scan types to optimize performance or reduce network impact - for example, use only Browser and SQLService for quick detection, or add SqlConnect for definitive verification.<br />
Default performs all scans except SqlConnect, which requires explicit specification due to authentication overhead.<br />
Scans:</p>
<ul>
<li>Browser
<ul>
<li>Tries discovering all instances via the browser service</li>
<li>This scan detects instances.</li>
</ul>
</li>
<li>SQLService
<ul>
<li>Tries listing all SQL Services using CIM/WMI</li>
<li>This scan uses credentials specified in the '-Credential' parameter if any.</li>
<li>This scan detects instances.</li>
<li>Success in this scan guarantees high confidence (See parameter '-MinimumConfidence' for details).</li>
</ul>
</li>
<li>SPN
<ul>
<li>Tries looking up the Service Principal Names for each instance</li>
<li>Will use the nearest Domain Controller by default</li>
<li>Target a specific domain controller using the '-DomainController' parameter</li>
<li>If using the '-DomainController' parameter, use the '-Credential' parameter to specify the credentials used to connect</li>
</ul>
</li>
<li>TCPPort
<ul>
<li>Tries connecting to the TCP Ports.</li>
<li>By default, port 1433 is connected to.</li>
<li>The parameter '-TCPPort' can be used to provide a list of port numbers to scan.</li>
<li>This scan detects possible instances. Since other services might bind to a given port, this is not the most reliable test.</li>
<li>This scan is also used to validate found SPNs if both scans are used in combination</li>
</ul>
</li>
<li>DNSResolve
<ul>
<li>Tries resolving the computername in DNS</li>
</ul>
</li>
<li>Ping
<ul>
<li>Tries pinging the computer. Failure will NOT terminate scans.</li>
</ul>
</li>
<li>SqlConnect
<ul>
<li>Tries to establish a SQL connection to the server</li>
<li>Uses windows credentials by default</li>
<li>Specify custom credentials using the '-SqlCredential' parameter</li>
<li>This scan is not used by default</li>
<li>Success in this scan guarantees high confidence (See parameter '-MinimumConfidence' for details).</li>
</ul>
</li>
<li>All
<ul>
<li>All of the above<br></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>Default</td>
</tr>
<tr>
<td>Accepted Values</td>
<td>Default,SQLService,Browser,TCPPort,All,SPN,Ping,SqlConnect,DNSResolve</td>
</tr>
</tbody>
</table>
<h5 id="ipaddress">-IpAddress</h5>
<p>Defines custom IP ranges to scan when using IPRange discovery instead of auto-detecting local subnets.<br />
Use this to target specific network segments like DMZ subnets or remote locations where SQL instances might exist.<br />
Supports multiple formats: single IPs (10.1.1.1), ranges (10.1.1.1-10.1.1.5), CIDR notation (10.1.1.1/24), or subnet masks (10.1.1.1/255.255.255.0).<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="domaincontroller">-DomainController</h5>
<p>Specifies a specific domain controller for Active Directory queries when using DomainSPN or DomainServer discovery.<br />
Use this when you need to target a specific DC for cross-domain searches or when the nearest DC is unavailable.<br />
Requires the '-Credential' parameter when querying remote domains or when explicit authentication is needed.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="tcpport">-TCPPort</h5>
<p>Specifies which TCP ports to test for SQL Server connectivity during port scanning.<br />
Use this to detect instances running on non-standard ports or to scan multiple common SQL Server ports like 1433, 1434, and custom ports.<br />
Defaults to 1433 (SQL Server default port).<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>1433</td>
</tr>
</tbody>
</table>
<h5 id="minimumconfidence">-MinimumConfidence</h5>
<p>Filters results based on how certain the scan is that a SQL Server instance exists on each target.<br />
Use High for definitive results when you need accurate inventories, Medium for likely instances, or Low for comprehensive discovery that includes potential false positives.<br />
High confidence requires successful SQL service detection or connection, Medium requires browser response or combined port+SPN validation, Low accepts single indicators like open ports or SPN records.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>Low</td>
</tr>
</tbody>
</table>
<h5 id="enableexception">-EnableException</h5>
<p>By default, when something goes wrong we try to catch it, interpret it and give you a friendly warning message.<br />
This avoids overwhelming you with &quot;sea of red&quot; exceptions, but is inconvenient because it basically disables advanced scripting.<br />
Using this switch turns this &quot;nice by default&quot; feature off and enables you to catch exceptions with your own try/catch.<br></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alias</td>
<td></td>
</tr>
<tr>
<td>Required</td>
<td>False</td>
</tr>
<tr>
<td>Pipeline</td>
<td>false</td>
</tr>
<tr>
<td>Default Value</td>
<td>False</td>
</tr>
</tbody>
</table>
<p> </p>

                </div> <!-- rendered -->
            </div>
        </div>
    </div>
</body>

</html>
